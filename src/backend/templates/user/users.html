{% extends "base.html" %} {% block title %}User List{% endblock %} {% block
content %}

<h1 class="text-2xl mb-4">Users</h1>

<table class="min-w-full bg-white rounded-lg overflow-hidden shadow-md">
  <thead>
    <tr class="bg-[#002F41] text-white">
      {% for header in headers %}
      <th
        class="w-1/{{ headers|length }} text-center py-3 px-4 uppercase font-semibold text-sm"
      >
        {{ header }}
      </th>
      {% endfor %}
    </tr>
  </thead>
  <tbody class="text-gray-700">
    {% for row in data %}
    <tr
      class="{% if loop.index is even %}bg-gray-50{% endif %} hover:bg-gray-100"
    >
      {% for field in headers %} {% set key = field.lower().replace(" ", "_") %}
      <td class="w-1/{{ headers|length }} text-center py-3 px-4">
        {% if field == 'Name' %}
        <a
          href="/user/{{ row['id'] }}"
          class="text-[#0e5c6a] hover:underline"
          >{{ row['full_name'] }}</a
        >
        {% elif field == 'Projects' %}
        <a
          href="/user/{{ row['id'] }}/projects"
          class="text-[#0e5c6a] hover:underline"
          >{{ row[key]|length }} {{'Project' if row[key]|length == 1 else 'Projects'}}</a
        >
        {% elif field == 'Tasks' %}
        <a
          href="/user/{{ row['id'] }}/tasks"
          class="text-[#0e5c6a] hover:underline"
          >{{ row[key]|length }} {{'Task' if row[key]|length == 1 else 'Tasks'}}</a
        >
        {% else %} {{ row[key] }} {% endif %}
      </td>
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>

{% include "pagination.html" %}

{% endblock %}
